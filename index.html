<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rabdan Academy - MOD/AI Dashboard</title>
    
    <!-- Firebase SDK v9 (Compat mode) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            -webkit-font-smoothing: antialiased;
            background: #F8F9FA;
        }
        @media (max-width: 768px) {
            .mobile-stack { grid-template-columns: 1fr !important; }
            .mobile-hide { display: none !important; }
            .mobile-scroll { overflow-x: auto; -webkit-overflow-scrolling: touch; }
        }
        .edit-field {
            background: white;
            border: 2px solid #C9A961;
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 14px;
            font-weight: 600;
            color: #1A2F4F;
            width: 100%;
            transition: all 0.2s;
        }
        .edit-field:focus {
            outline: none;
            border-color: #8B7355;
            box-shadow: 0 0 0 3px rgba(201, 169, 97, 0.2);
        }
        .edit-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .edit-btn-add {
            background: #28A745;
            color: white;
        }
        .edit-btn-delete {
            background: #DC3545;
            color: white;
        }
        .edit-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        .modal-content {
            background: white;
            padding: 32px;
            border-radius: 12px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBkuIxCpY4_C39rsGT6hoFXHHCVY_GYXbI",
            authDomain: "aitutor-8d402.firebaseapp.com",
            databaseURL: "https://aitutor-8d402-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "aitutor-8d402",
            storageBucket: "aitutor-8d402.firebasestorage.app",
            messagingSenderId: "1069973573945",
            appId: "1:1069973573945:web:f89e59483a5ff70a0458e8",
            measurementId: "G-J2EHC3L1N0"
        };

        // Initialize Firebase
        let db = null;
        let isFirebaseConfigured = false;

        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.database();
            isFirebaseConfigured = true;
            console.log("✅ Firebase connected successfully");
        } catch (error) {
            console.error("❌ Firebase initialization error:", error);
        }

        const colors = {
            primary: '#1A2F4F',
            secondary: '#8B7355',
            accent: '#C9A961',
            white: '#FFFFFF',
            bg: '#F8F9FA',
            border: '#E1E4E8',
            text: '#2C3E50',
            textLight: '#6C757D',
            success: '#28A745',
            warning: '#FFC107',
            danger: '#DC3545',
            info: '#17A2B8'
        };

        // Icons
        const Icon = ({ d, size = 24, color = colors.primary }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d={d} />
            </svg>
        );

        const AlertCircle = (props) => <Icon {...props} d="M12 2 A 10 10 0 1 1 12 22 A 10 10 0 1 1 12 2 M 12 8 L 12 12 M 12 16 L 12.01 16" />;
        const Calendar = (props) => <Icon {...props} d="M3 4 L 21 4 L 21 20 C 21 21 20 22 19 22 L 5 22 C 4 22 3 21 3 20 Z M 16 2 L 16 6 M 8 2 L 8 6 M 3 10 L 21 10" />;
        const Users = (props) => <Icon {...props} d="M17 21 L 17 19 A 4 4 0 0 0 13 15 L 5 15 A 4 4 0 0 0 1 19 L 1 21 M 9 7 A 4 4 0 1 1 9 15 A 4 4 0 1 1 9 7 M 23 21 L 23 19 A 4 4 0 0 0 20 15.13 M 16 3.13 A 4 4 0 0 1 16 10.88" />;
        const Clock = (props) => <Icon {...props} d="M12 2 A 10 10 0 1 1 12 22 A 10 10 0 1 1 12 2 M 12 6 L 12 12 L 16 14" />;
        const CheckCircle = (props) => <Icon {...props} d="M22 11.08 L 22 12 A 10 10 0 1 1 16.07 2.86 M 22 4 L 12 14.01 L 9 11.01" />;
        const Target = (props) => <Icon {...props} d="M12 2 A 10 10 0 1 1 12 22 A 10 10 0 1 1 12 2 M 12 6 A 6 6 0 1 1 12 18 A 6 6 0 1 1 12 6 M 12 10 A 2 2 0 1 1 12 14 A 2 2 0 1 1 12 10" />;
        const Edit2 = (props) => <Icon {...props} d="M17 3 A 2.828 2.828 0 1 1 21 7 L 7.5 20.5 L 2 22 L 3.5 16.5 Z" />;
        const Save = (props) => <Icon {...props} d="M19 21 L 5 21 A 2 2 0 0 1 3 19 L 3 5 A 2 2 0 0 1 5 3 L 16 3 L 21 8 L 21 19 A 2 2 0 0 1 19 21 M 17 21 L 17 13 L 7 13 L 7 21 M 7 3 L 7 8 L 15 8" />;
        const BarChart = (props) => <Icon {...props} d="M3 3 L 3 21 L 21 21 M 18 17 L 18 9 M 13 17 L 13 5 M 8 17 L 8 14" />;
        const FileText = (props) => <Icon {...props} d="M14 2 L 6 2 A 2 2 0 0 0 4 4 L 4 20 A 2 2 0 0 0 6 22 L 18 22 A 2 2 0 0 0 20 20 L 20 8 Z M 14 2 L 14 8 L 20 8 M 16 13 L 8 13 M 16 17 L 8 17" />;
        const Eye = (props) => <Icon {...props} d="M1 12 S 5 4 12 4 S 23 12 23 12 S 19 20 12 20 S 1 12 1 12 M 12 9 A 3 3 0 1 1 12 15 A 3 3 0 1 1 12 9" />;
        const Plus = (props) => <Icon {...props} d="M12 5 L 12 19 M 5 12 L 19 12" />;
        const Trash = (props) => <Icon {...props} d="M3 6 L 5 6 L 21 6 M 19 6 L 19 20 C 19 21 18 22 17 22 L 7 22 C 6 22 5 21 5 20 L 5 6 M 8 6 L 8 4 C 8 3 9 2 10 2 L 14 2 C 15 2 16 3 16 4 L 16 6" />;
        const UserPlus = (props) => <Icon {...props} d="M16 21 L 16 19 A 4 4 0 0 0 12 15 L 4 15 A 4 4 0 0 0 0 19 L 0 21 M 8 7 A 4 4 0 1 1 8 15 A 4 4 0 1 1 8 7 M 20 8 L 20 14 M 17 11 L 23 11" />;

        const defaultData = {
            title: 'MOD/AI',
            launch: '2026-01-02',
            status: 'green',
            milestones: [
                { id: '1', title: 'Course Design Approval', date: '2025-11-10', status: 'completed' },
                { id: '2', title: 'Content Development Phase 1', date: '2025-11-20', status: 'inProgress' },
                { id: '3', title: 'Platform Integration', date: '2025-11-25', status: 'pending' },
                { id: '4', title: 'Quality Assurance Review', date: '2025-11-28', status: 'pending' },
                { id: '5', title: 'Course Launch', date: '2026-01-02', status: 'pending' }
            ],
            issues: [
                { id: '1', issue: 'Video production behind schedule', severity: 'high', owner: 'Production Team' },
                { id: '2', issue: 'Awaiting SME review on Course 3', severity: 'medium', owner: 'Academic Affairs' }
            ],
            timeline: [
                { id: '1', phase: 'Planning & Design', start: '2025-10-15', end: '2025-11-05', progress: 100 },
                { id: '2', phase: 'Content Development', start: '2025-11-06', end: '2025-11-22', progress: 65 },
                { id: '3', phase: 'Platform Setup', start: '2025-11-15', end: '2025-11-25', progress: 40 },
                { id: '4', phase: 'Testing & QA', start: '2025-11-23', end: '2025-11-30', progress: 10 },
                { id: '5', phase: 'Launch Preparation', start: '2025-11-28', end: '2026-01-02', progress: 0 }
            ],
            courses: [
                { id: '1', title: 'Foundation Security Principles', mandatory: true, duration: '6 weeks', modules: 8, status: 'Development', desc: 'Core concepts in security and emergency management' },
                { id: '2', title: 'Crisis Communication', mandatory: false, duration: '4 weeks', modules: 6, status: 'Design', desc: 'Effective communication strategies during emergencies' },
                { id: '3', title: 'Risk Assessment & Management', mandatory: false, duration: '5 weeks', modules: 7, status: 'Design', desc: 'Identifying and mitigating security risks' },
                { id: '4', title: 'Incident Response Planning', mandatory: false, duration: '4 weeks', modules: 6, status: 'Planning', desc: 'Developing comprehensive incident response protocols' },
                { id: '5', title: 'Leadership in Emergency Scenarios', mandatory: false, duration: '5 weeks', modules: 7, status: 'Planning', desc: 'Leading teams effectively under pressure' }
            ],
            stakeholders: [
                { id: '1', name: 'Dr. Ahmed Al-Mansoori', role: 'Project Sponsor', contact: 'a.almansoori@ra.ac.ae' },
                { id: '2', name: 'Sarah Mitchell', role: 'Project Manager', contact: 's.mitchell@ra.ac.ae' },
                { id: '3', name: 'Prof. Khalid Hassan', role: 'Lead Instructional Designer', contact: 'k.hassan@ra.ac.ae' },
                { id: '4', name: 'IT Department', role: 'Technical Support', contact: 'it.support@ra.ac.ae' }
            ],
            details: {
                budget: '$125,000',
                team: '12 members',
                platform: 'Canvas LMS',
                students: '200+ per cohort',
                assessment: 'Quizzes, Assignments, Discussion Forums, Final Projects'
            }
        };

        const App = () => {
            const [auth, setAuth] = useState(false);
            const [userRole, setUserRole] = useState('');
            const [currentUser, setCurrentUser] = useState('');
            const [user, setUser] = useState('');
            const [pass, setPass] = useState('');
            const [tab, setTab] = useState('dashboard');
            const [edit, setEdit] = useState(false);
            const [err, setErr] = useState('');
            const [time, setTime] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });
            const [data, setData] = useState(defaultData);
            const [saveStatus, setSaveStatus] = useState('');
            const [loading, setLoading] = useState(true);
            const [users, setUsers] = useState({});
            const [showUserModal, setShowUserModal] = useState(false);
            const [newUsername, setNewUsername] = useState('');
            const [newPassword, setNewPassword] = useState('');

            // Load data and users from Firebase
            useEffect(() => {
                if (isFirebaseConfigured && db) {
                    // Load project data
                    const dataRef = db.ref('projectData');
                    dataRef.once('value')
                        .then((snapshot) => {
                            const firebaseData = snapshot.val();
                            if (firebaseData) {
                                setData(firebaseData);
                            } else {
                                dataRef.set(defaultData)
                                    .catch((error) => console.error("Error initializing data:", error));
                            }
                        })
                        .catch((error) => console.error("Error loading data:", error));

                    dataRef.on('value', (snapshot) => {
                        const firebaseData = snapshot.val();
                        if (firebaseData) {
                            setData(firebaseData);
                        }
                    });

                    // Load users
                    const usersRef = db.ref('users');
                    usersRef.once('value')
                        .then((snapshot) => {
                            const firebaseUsers = snapshot.val();
                            if (firebaseUsers) {
                                setUsers(firebaseUsers);
                            } else {
                                // Initialize with admin user
                                const defaultUsers = {
                                    admin: { password: 'admin123', role: 'admin' }
                                };
                                usersRef.set(defaultUsers);
                                setUsers(defaultUsers);
                            }
                            setLoading(false);
                        })
                        .catch((error) => {
                            console.error("Error loading users:", error);
                            setLoading(false);
                        });

                    usersRef.on('value', (snapshot) => {
                        const firebaseUsers = snapshot.val();
                        if (firebaseUsers) {
                            setUsers(firebaseUsers);
                        }
                    });

                    return () => {
                        dataRef.off();
                        usersRef.off();
                    };
                } else {
                    setLoading(false);
                }
            }, []);

            // Save data
            const saveData = (newData) => {
                setData(newData);
                if (isFirebaseConfigured && db) {
                    db.ref('projectData').set(newData)
                        .then(() => {
                            setSaveStatus('✓ Saved');
                            setTimeout(() => setSaveStatus(''), 2000);
                        })
                        .catch((error) => {
                            setSaveStatus('✗ Failed');
                            console.error('Save error:', error);
                            setTimeout(() => setSaveStatus(''), 3000);
                        });
                }
            };

            // Countdown timer
            useEffect(() => {
                const timer = setInterval(() => {
                    const diff = new Date(data.launch).getTime() - new Date().getTime();
                    if (diff > 0) {
                        setTime({
                            days: Math.floor(diff / (1000 * 60 * 60 * 24)),
                            hours: Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
                            minutes: Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)),
                            seconds: Math.floor((diff % (1000 * 60)) / 1000)
                        });
                    }
                }, 1000);
                return () => clearInterval(timer);
            }, [data.launch]);

            const login = (e) => {
                e.preventDefault();
                if (users[user] && users[user].password === pass) {
                    setAuth(true);
                    setCurrentUser(user);
                    setUserRole(users[user].role);
                    setErr('');
                } else {
                    setErr('Invalid credentials');
                }
            };

            const addUser = () => {
                if (!newUsername || !newPassword) {
                    alert('Please enter both username and password');
                    return;
                }
                if (users[newUsername]) {
                    alert('Username already exists');
                    return;
                }
                const updatedUsers = {
                    ...users,
                    [newUsername]: { password: newPassword, role: 'viewer' }
                };
                if (isFirebaseConfigured && db) {
                    db.ref('users').set(updatedUsers)
                        .then(() => {
                            setUsers(updatedUsers);
                            setNewUsername('');
                            setNewPassword('');
                            setShowUserModal(false);
                        })
                        .catch((error) => console.error('Error adding user:', error));
                }
            };

            const deleteUser = (username) => {
                if (username === 'admin') {
                    alert('Cannot delete admin user');
                    return;
                }
                if (confirm(`Delete user ${username}?`)) {
                    const updatedUsers = { ...users };
                    delete updatedUsers[username];
                    if (isFirebaseConfigured && db) {
                        db.ref('users').set(updatedUsers)
                            .then(() => setUsers(updatedUsers))
                            .catch((error) => console.error('Error deleting user:', error));
                    }
                }
            };

            const updateField = (path, value) => {
                const newData = { ...data };
                const keys = path.split('.');
                let current = newData;
                for (let i = 0; i < keys.length - 1; i++) {
                    current = current[keys[i]];
                }
                current[keys[keys.length - 1]] = value;
                saveData(newData);
            };

            const addItem = (arrayPath, newItem) => {
                const newData = { ...data };
                newData[arrayPath].push({ ...newItem, id: Date.now().toString() });
                saveData(newData);
            };

            const deleteItem = (arrayPath, id) => {
                const newData = { ...data };
                newData[arrayPath] = newData[arrayPath].filter(item => item.id !== id);
                saveData(newData);
            };

            const updateArrayItem = (arrayPath, id, field, value) => {
                const newData = { ...data };
                const item = newData[arrayPath].find(i => i.id === id);
                if (item) {
                    item[field] = value;
                    saveData(newData);
                }
            };

            if (loading) {
                return (
                    <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', background: colors.bg }}>
                        <div style={{ textAlign: 'center' }}>
                            <img src="https://raw.githubusercontent.com/PrometheusDevCreator/Dashboards/main/Rabdan%20Logo%203.png" alt="Rabdan Academy" style={{ maxWidth: '200px', marginBottom: '20px' }} />
                            <p style={{ color: colors.textLight, fontSize: '14px', fontWeight: '600' }}>Loading dashboard...</p>
                        </div>
                    </div>
                );
            }

            if (!auth) {
                return (
                    <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', background: `linear-gradient(135deg, ${colors.primary} 0%, ${colors.secondary} 100%)`, padding: '20px' }}>
                        <div style={{ background: colors.white, padding: '48px 40px', borderRadius: '16px', width: '100%', maxWidth: '420px', boxShadow: '0 20px 60px rgba(0,0,0,0.2)' }}>
                            <div style={{ textAlign: 'center', marginBottom: '32px' }}>
                                <img src="https://raw.githubusercontent.com/PrometheusDevCreator/Dashboards/main/Rabdan%20Logo%201.png" alt="Rabdan Academy" style={{ maxWidth: '250px', marginBottom: '32px' }} />
                            </div>
                            <form onSubmit={login}>
                                <div style={{ marginBottom: '20px' }}>
                                    <input type="text" value={user} onChange={(e) => setUser(e.target.value)} className="edit-field" placeholder="Username" style={{ textAlign: 'center' }} />
                                </div>
                                <div style={{ marginBottom: '24px' }}>
                                    <input type="password" value={pass} onChange={(e) => setPass(e.target.value)} className="edit-field" placeholder="Password" style={{ textAlign: 'center' }} />
                                </div>
                                {err && <div style={{ padding: '14px', background: '#FEE', color: colors.danger, borderRadius: '8px', marginBottom: '20px', fontSize: '13px', fontWeight: '600', border: `1px solid ${colors.danger}`, textAlign: 'center' }}>{err}</div>}
                                <button type="submit" style={{ width: '100%', padding: '16px', background: colors.primary, color: colors.white, border: 'none', borderRadius: '8px', fontSize: '15px', fontWeight: '700', cursor: 'pointer', letterSpacing: '0.5px', textTransform: 'uppercase', boxShadow: '0 4px 12px rgba(26,47,79,0.3)' }}>Sign In</button>
                            </form>
                        </div>
                    </div>
                );
            }

            const statusColor = data.status === 'green' ? colors.success : data.status === 'yellow' ? colors.warning : colors.danger;
            const needle = data.status === 'green' ? 30 : data.status === 'yellow' ? 0 : -30;
            const isAdmin = userRole === 'admin';

            return (
                <div style={{ minHeight: '100vh', background: colors.bg }}>
                    {/* Header */}
                    <div style={{ background: colors.primary, borderBottom: `3px solid ${colors.accent}`, padding: '16px 24px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', gap: '16px', boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>
                            <img src="https://raw.githubusercontent.com/PrometheusDevCreator/Dashboards/main/Rabdan%20Logo%203.png" alt="Rabdan Academy" style={{ height: '48px' }} />
                            <div>
                                <h1 style={{ fontSize: '18px', fontWeight: '700', color: colors.white, margin: 0, letterSpacing: '-0.3px' }}>RABDAN ACADEMY</h1>
                                <p style={{ fontSize: '12px', color: colors.accent, margin: 0, fontWeight: '600' }}>
                                    {currentUser} ({userRole})
                                </p>
                            </div>
                        </div>
                        <div style={{ display: 'flex', gap: '12px', flexWrap: 'wrap', alignItems: 'center' }}>
                            {saveStatus && (
                                <span style={{ color: colors.accent, fontSize: '12px', fontWeight: '700' }}>{saveStatus}</span>
                            )}
                            {isAdmin && (
                                <>
                                    <button onClick={() => setShowUserModal(true)} style={{ padding: '8px 16px', background: colors.accent, color: colors.primary, border: 'none', borderRadius: '6px', cursor: 'pointer', fontSize: '12px', fontWeight: '700', display: 'flex', alignItems: 'center', gap: '6px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>
                                        <UserPlus size={14} color={colors.primary} />
                                        <span className="mobile-hide">Users</span>
                                    </button>
                                    <button onClick={() => setEdit(!edit)} style={{ padding: '8px 16px', background: edit ? colors.accent : 'transparent', color: edit ? colors.primary : colors.white, border: `2px solid ${edit ? colors.accent : colors.white}`, borderRadius: '6px', cursor: 'pointer', fontSize: '12px', fontWeight: '700', display: 'flex', alignItems: 'center', gap: '6px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>
                                        {edit ? <Save size={14} color={colors.primary} /> : <Edit2 size={14} color={colors.white} />}
                                        <span className="mobile-hide">{edit ? 'Save' : 'Edit'}</span>
                                    </button>
                                </>
                            )}
                            <button onClick={() => setAuth(false)} style={{ padding: '8px 16px', background: 'transparent', color: colors.white, border: `2px solid ${colors.white}`, borderRadius: '6px', cursor: 'pointer', fontSize: '12px', fontWeight: '700', textTransform: 'uppercase', letterSpacing: '0.5px' }}>Logout</button>
                        </div>
                    </div>

                    {/* User Management Modal */}
                    {showUserModal && (
                        <div className="modal-overlay" onClick={() => setShowUserModal(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <h3 style={{ fontSize: '20px', fontWeight: '700', color: colors.primary, marginBottom: '20px' }}>Manage Users</h3>
                                
                                <div style={{ marginBottom: '24px' }}>
                                    <h4 style={{ fontSize: '14px', fontWeight: '700', color: colors.text, marginBottom: '12px' }}>Add New User</h4>
                                    <input 
                                        type="text" 
                                        value={newUsername} 
                                        onChange={(e) => setNewUsername(e.target.value)}
                                        className="edit-field"
                                        placeholder="Username"
                                        style={{ marginBottom: '12px' }}
                                    />
                                    <input 
                                        type="text" 
                                        value={newPassword} 
                                        onChange={(e) => setNewPassword(e.target.value)}
                                        className="edit-field"
                                        placeholder="Password"
                                        style={{ marginBottom: '12px' }}
                                    />
                                    <button onClick={addUser} className="edit-btn edit-btn-add" style={{ width: '100%' }}>
                                        <Plus size={12} color="white" style={{ display: 'inline', marginRight: '6px' }} />
                                        Add User
                                    </button>
                                </div>

                                <div>
                                    <h4 style={{ fontSize: '14px', fontWeight: '700', color: colors.text, marginBottom: '12px' }}>Existing Users</h4>
                                    <div style={{ maxHeight: '300px', overflowY: 'auto' }}>
                                        {Object.entries(users).map(([username, userData]) => (
                                            <div key={username} style={{ padding: '12px', background: colors.bg, borderRadius: '8px', marginBottom: '8px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                                                <div>
                                                    <div style={{ fontSize: '14px', fontWeight: '700', color: colors.primary }}>{username}</div>
                                                    <div style={{ fontSize: '12px', color: colors.textLight }}>{userData.role}</div>
                                                </div>
                                                {username !== 'admin' && (
                                                    <button onClick={() => deleteUser(username)} className="edit-btn edit-btn-delete">
                                                        <Trash size={12} color="white" />
                                                    </button>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                <button onClick={() => setShowUserModal(false)} style={{ marginTop: '20px', width: '100%', padding: '12px', background: colors.primary, color: colors.white, border: 'none', borderRadius: '8px', fontSize: '14px', fontWeight: '700', cursor: 'pointer' }}>
                                    Close
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Tabs */}
                    <div className="mobile-scroll" style={{ background: colors.white, borderBottom: `1px solid ${colors.border}`, padding: '0 24px', overflowX: 'auto' }}>
                        <div style={{ display: 'flex', gap: '8px', minWidth: 'max-content' }}>
                            {[
                                { id: 'dashboard', label: 'Dashboard', icon: <BarChart size={16} /> },
                                { id: 'timeline', label: 'Timeline', icon: <Calendar size={16} /> },
                                { id: 'details', label: 'Details', icon: <FileText size={16} /> },
                                { id: 'courses', label: 'Courses', icon: <Eye size={16} /> },
                                { id: 'stakeholders', label: 'Team', icon: <Users size={16} /> }
                            ].map(t => (
                                <button key={t.id} onClick={() => setTab(t.id)} style={{ padding: '16px 24px', background: 'transparent', color: tab === t.id ? colors.primary : colors.textLight, border: 'none', borderBottom: tab === t.id ? `3px solid ${colors.accent}` : '3px solid transparent', cursor: 'pointer', fontSize: '13px', fontWeight: tab === t.id ? '700' : '600', display: 'flex', alignItems: 'center', gap: '8px', whiteSpace: 'nowrap', textTransform: 'uppercase', letterSpacing: '0.5px', transition: 'all 0.2s' }}>
                                    {React.cloneElement(t.icon, { color: tab === t.id ? colors.primary : colors.textLight })}
                                    {t.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Content */}
                    <div style={{ padding: '24px' }}>
                        {tab === 'dashboard' && (
                            <div>
                                {/* Title Bar */}
                                <div style={{ background: `linear-gradient(135deg, ${colors.primary} 0%, ${colors.secondary} 100%)`, padding: '24px 28px', borderRadius: '12px', marginBottom: '24px', boxShadow: '0 4px 12px rgba(0,0,0,0.1)', border: `1px solid ${colors.accent}` }}>
                                    {edit ? (
                                        <input 
                                            type="text" 
                                            value={data.title} 
                                            onChange={(e) => updateField('title', e.target.value)}
                                            className="edit-field"
                                            style={{ fontSize: '28px', fontWeight: '700', color: colors.white, background: 'transparent', border: 'none', borderBottom: `3px solid ${colors.accent}`, outline: 'none', textAlign: 'left', textTransform: 'uppercase', letterSpacing: '-0.5px' }}
                                        />
                                    ) : (
                                        <h2 style={{ fontSize: '28px', fontWeight: '700', color: colors.white, margin: 0, letterSpacing: '-0.5px', textTransform: 'uppercase' }}>{data.title}</h2>
                                    )}
                                    <p style={{ fontSize: '14px', color: colors.accent, margin: '4px 0 0 0', fontWeight: '600' }}>Project Dashboard</p>
                                </div>

                                {/* Countdown & Status */}
                                <div className="mobile-stack" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '24px', marginBottom: '24px' }}>
                                    {/* Countdown */}
                                    <div style={{ background: colors.white, padding: '28px', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.08)', border: `1px solid ${colors.border}` }}>
                                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px', paddingBottom: '16px', borderBottom: `2px solid ${colors.accent}` }}>
                                            <Clock size={24} color={colors.primary} />
                                            <h3 style={{ fontSize: '16px', fontWeight: '700', color: colors.primary, margin: 0, textTransform: 'uppercase', letterSpacing: '0.5px' }}>Launch Countdown</h3>
                                        </div>
                                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '12px', textAlign: 'center', marginBottom: '20px' }}>
                                            {[{ label: 'DAYS', value: time.days }, { label: 'HRS', value: time.hours }, { label: 'MIN', value: time.minutes }, { label: 'SEC', value: time.seconds }].map((item, idx) => (
                                                <div key={idx}>
                                                    <div style={{ background: colors.primary, padding: '16px 8px', borderRadius: '8px', marginBottom: '8px', border: `2px solid ${colors.accent}` }}>
                                                        <div style={{ fontSize: '24px', fontWeight: '700', color: colors.white }}>{String(item.value).padStart(2, '0')}</div>
                                                    </div>
                                                    <div style={{ fontSize: '10px', color: colors.textLight, fontWeight: '700', letterSpacing: '0.5px' }}>{item.label}</div>
                                                </div>
                                            ))}
                                        </div>
                                        {edit ? (
                                            <div>
                                                <label style={{ display: 'block', marginBottom: '8px', fontSize: '11px', fontWeight: '700', color: colors.text, textTransform: 'uppercase' }}>Launch Date</label>
                                                <input 
                                                    type="date" 
                                                    value={data.launch} 
                                                    onChange={(e) => updateField('launch', e.target.value)}
                                                    className="edit-field"
                                                />
                                            </div>
                                        ) : (
                                            <div style={{ padding: '14px', background: `linear-gradient(135deg, ${colors.accent}15 0%, ${colors.accent}25 100%)`, borderRadius: '8px', fontSize: '13px', color: colors.primary, textAlign: 'center', fontWeight: '700', border: `1px solid ${colors.accent}` }}>
                                                TARGET: {new Date(data.launch).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }).toUpperCase()}
                                            </div>
                                        )}
                                    </div>

                                    {/* Status */}
                                    <div style={{ background: colors.white, padding: '28px', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.08)', border: `1px solid ${colors.border}` }}>
                                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px', paddingBottom: '16px', borderBottom: `2px solid ${colors.accent}` }}>
                                            <Target size={24} color={colors.primary} />
                                            <h3 style={{ fontSize: '16px', fontWeight: '700', color: colors.primary, margin: 0, textTransform: 'uppercase', letterSpacing: '0.5px' }}>Project Status</h3>
                                        </div>
                                        <div style={{ position: 'relative', width: '180px', height: '110px', margin: '0 auto 20px' }}>
                                            <svg width="180" height="110">
                                                <path d="M 20 100 A 70 70 0 0 1 160 100" fill="none" stroke={`${colors.danger}40`} strokeWidth="18" />
                                                <path d="M 20 100 A 70 70 0 0 1 90 30" fill="none" stroke={`${colors.warning}40`} strokeWidth="18" />
                                                <path d="M 90 30 A 70 70 0 0 1 160 100" fill="none" stroke={`${colors.success}40`} strokeWidth="18" />
                                            </svg>
                                            <div style={{ position: 'absolute', width: '4px', height: '60px', background: colors.primary, bottom: '10px', left: '88px', transformOrigin: 'bottom center', transform: `rotate(${needle}deg)`, borderRadius: '2px', boxShadow: '0 2px 4px rgba(0,0,0,0.2)' }}>
                                                <div style={{ width: '12px', height: '12px', background: colors.accent, borderRadius: '50%', position: 'absolute', bottom: '-6px', left: '-4px', border: `2px solid ${colors.primary}` }}></div>
                                            </div>
                                        </div>
                                        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '10px', fontWeight: '700', marginBottom: '20px', letterSpacing: '0.5px' }}>
                                            <span style={{ color: colors.danger }}>AT RISK</span>
                                            <span style={{ color: colors.warning }}>CAUTION</span>
                                            <span style={{ color: colors.success }}>ON TRACK</span>
                                        </div>
                                        {edit ? (
                                            <select 
                                                value={data.status} 
                                                onChange={(e) => updateField('status', e.target.value)}
                                                className="edit-field"
                                            >
                                                <option value="green">On Track</option>
                                                <option value="yellow">Needs Attention</option>
                                                <option value="red">At Risk</option>
                                            </select>
                                        ) : (
                                            <div style={{ padding: '14px', background: data.status === 'green' ? `${colors.success}15` : data.status === 'yellow' ? `${colors.warning}15` : `${colors.danger}15`, borderRadius: '8px', textAlign: 'center', border: `2px solid ${statusColor}` }}>
                                                <div style={{ fontSize: '16px', fontWeight: '700', color: statusColor, letterSpacing: '0.5px' }}>
                                                    {data.status === 'green' ? 'ON TRACK' : data.status === 'yellow' ? 'NEEDS ATTENTION' : 'AT RISK'}
                                                </div>
                                                <div style={{ fontSize: '11px', color: colors.textLight, marginTop: '4px', fontWeight: '600' }}>Overall Project Health</div>
                                            </div>
                                        )}
                                    </div>
                                </div>

                                {/* Milestones & Issues */}
                                <div className="mobile-stack" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '24px' }}>
                                    {/* Milestones */}
                                    <div style={{ background: colors.white, padding: '28px', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.08)', border: `1px solid ${colors.border}` }}>
                                        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '20px', paddingBottom: '16px', borderBottom: `2px solid ${colors.accent}` }}>
                                            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                                                <CheckCircle size={24} color={colors.primary} />
                                                <h3 style={{ fontSize: '16px', fontWeight: '700', color: colors.primary, margin: 0, textTransform: 'uppercase', letterSpacing: '0.5px' }}>Key Milestones</h3>
                                            </div>
                                            {edit && (
                                                <button onClick={() => addItem('milestones', { title: 'New Milestone', date: '2026-01-01', status: 'pending' })} className="edit-btn edit-btn-add">
                                                    <Plus size={12} color="white" />
                                                </button>
                                            )}
                                        </div>
                                        <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>
                                            {data.milestones.map(m => (
                                                <div key={m.id} style={{ padding: '16px', background: colors.bg, borderRadius: '8px', borderLeft: `4px solid ${m.status === 'completed' ? colors.success : m.status === 'inProgress' ? colors.info : colors.textLight}`, border: `1px solid ${colors.border}`, borderLeft: `4px solid ${m.status === 'completed' ? colors.success : m.status === 'inProgress' ? colors.info : colors.textLight}` }}>
                                                    {edit ? (
                                                        <div>
                                                            <input 
                                                                type="text" 
                                                                value={m.title} 
                                                                onChange={(e) => updateArrayItem('milestones', m.id, 'title', e.target.value)}
                                                                className="edit-field"
                                                                style={{ marginBottom: '8px', fontSize: '13px' }}
                                                            />
                                                            <input 
                                                                type="date" 
                                                                value={m.date} 
                                                                onChange={(e) => updateArrayItem('milestones', m.id, 'date', e.target.value)}
                                                                className="edit-field"
                                                                style={{ marginBottom: '8px', fontSize: '11px' }}
                                                            />
                                                            <div style={{ display: 'flex', gap: '8px' }}>
                                                                <select 
                                                                    value={m.status} 
                                                                    onChange={(e) => updateArrayItem('milestones', m.id, 'status', e.target.value)}
                                                                    className="edit-field"
                                                                    style={{ fontSize: '11px' }}
                                                                >
                                                                    <option value="pending">Pending</option>
                                                                    <option value="inProgress">In Progress</option>
                                                                    <option value="completed">Completed</option>
                                                                </select>
                                                                <button onClick={() => deleteItem('milestones', m.id)} className="edit-btn edit-btn-delete">
                                                                    <Trash size={12} color="white" />
                                                                </button>
                                                            </div>
                                                        </div>
                                                    ) : (
                                                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', gap: '12px' }}>
                                                            <div style={{ flex: 1, minWidth: 0 }}>
                                                                <div style={{ fontSize: '13px', fontWeight: '700', color: colors.text, marginBottom: '6px', wordWrap: 'break-word' }}>{m.title}</div>
                                                                <div style={{ fontSize: '11px', color: colors.textLight, fontWeight: '600' }}>{new Date(m.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</div>
                                                            </div>
                                                            <span style={{ padding: '4px 10px', background: m.status === 'completed' ? colors.success : m.status === 'inProgress' ? colors.info : colors.white, color: m.status === 'completed' || m.status === 'inProgress' ? colors.white : colors.textLight, borderRadius: '6px', fontSize: '9px', fontWeight: '700', whiteSpace: 'nowrap', border: m.status === 'pending' ? `1px solid ${colors.border}` : 'none', letterSpacing: '0.5px' }}>
                                                                {m.status === 'completed' ? 'COMPLETE' : m.status === 'inProgress' ? 'ACTIVE' : 'PENDING'}
                                                            </span>
                                                        </div>
                                                    )}
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Issues */}
                                    <div style={{ background: colors.white, padding: '28px', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.08)', border: `1px solid ${colors.border}` }}>
                                        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '20px', paddingBottom: '16px', borderBottom: `2px solid ${colors.accent}` }}>
                                            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                                                <AlertCircle size={24} color={colors.primary} />
                                                <h3 style={{ fontSize: '16px', fontWeight: '700', color: colors.primary, margin: 0, textTransform: 'uppercase', letterSpacing: '0.5px' }}>Critical Issues</h3>
                                            </div>
                                            {edit && (
                                                <button onClick={() => addItem('issues', { issue: 'New Issue', severity: 'medium', owner: 'Team' })} className="edit-btn edit-btn-add">
                                                    <Plus size={12} color="white" />
                                                </button>
                                            )}
                                        </div>
                                        <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>
                                            {data.issues.map(i => (
                                                <div key={i.id} style={{ padding: '16px', background: i.severity === 'high' ? `${colors.danger}10` : `${colors.warning}10`, borderRadius: '8px', borderLeft: `4px solid ${i.severity === 'high' ? colors.danger : colors.warning}`, border: `1px solid ${i.severity === 'high' ? colors.danger : colors.warning}`, borderLeft: `4px solid ${i.severity === 'high' ? colors.danger : colors.warning}` }}>
                                                    {edit ? (
                                                        <div>
                                                            <input 
                                                                type="text" 
                                                                value={i.issue} 
                                                                onChange={(e) => updateArrayItem('issues', i.id, 'issue', e.target.value)}
                                                                className="edit-field"
                                                                style={{ marginBottom: '8px', fontSize: '13px' }}
                                                            />
                                                            <input 
                                                                type="text" 
                                                                value={i.owner} 
                                                                onChange={(e) => updateArrayItem('issues', i.id, 'owner', e.target.value)}
                                                                className="edit-field"
                                                                style={{ marginBottom: '8px', fontSize: '11px' }}
                                                            />
                                                            <div style={{ display: 'flex', gap: '8px' }}>
                                                                <select 
                                                                    value={i.severity} 
                                                                    onChange={(e) => updateArrayItem('issues', i.id, 'severity', e.target.value)}
                                                                    className="edit-field"
                                                                    style={{ fontSize: '11px' }}
                                                                >
                                                                    <option value="low">Low</option>
                                                                    <option value="medium">Medium</option>
                                                                    <option value="high">High</option>
                                                                </select>
                                                                <button onClick={() => deleteItem('issues', i.id)} className="edit-btn edit-btn-delete">
                                                                    <Trash size={12} color="white" />
                                                                </button>
                                                            </div>
                                                        </div>
                                                    ) : (
                                                        <>
                                                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '8px', gap: '12px' }}>
                                                                <div style={{ fontSize: '13px', fontWeight: '700', color: colors.text, flex: 1, wordWrap: 'break-word' }}>{i.issue}</div>
                                                                <span style={{ padding: '4px 10px', background: i.severity === 'high' ? colors.danger : colors.warning, color: colors.white, borderRadius: '6px', fontSize: '9px', fontWeight: '700', whiteSpace: 'nowrap', letterSpacing: '0.5px' }}>
                                                                    {i.severity.toUpperCase()}
                                                                </span>
                                                            </div>
                                                            <div style={{ fontSize: '11px', color: colors.textLight, fontWeight: '600' }}>OWNER: {i.owner.toUpperCase()}</div>
                                                        </>
                                                    )}
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {tab === 'timeline' && (
                            <div style={{ background: colors.white, padding: '32px', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.08)', border: `1px solid ${colors.border}` }}>
                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '32px' }}>
                                    <div>
                                        <h2 style={{ fontSize: '24px', fontWeight: '700', color: colors.primary, marginBottom: '8px', textTransform: 'uppercase', letterSpacing: '-0.5px' }}>Project Timeline</h2>
                                        <p style={{ fontSize: '13px', color: colors.textLight, fontWeight: '600' }}>Gantt-style progress overview</p>
                                    </div>
                                    {edit && (
                                        <button onClick={() => addItem('timeline', { phase: 'New Phase', start: '2026-01-01', end: '2026-01-15', progress: 0 })} className="edit-btn edit-btn-add">
                                            <Plus size={12} color="white" /> Add Phase
                                        </button>
                                    )}
                                </div>
                                <div style={{ display: 'flex', flexDirection: 'column', gap: '24px' }}>
                                    {data.timeline.map((p, idx) => (
                                        <div key={p.id}>
                                            {edit ? (
                                                <div style={{ padding: '20px', background: colors.bg, borderRadius: '8px', marginBottom: '12px' }}>
                                                    <input 
                                                        type="text" 
                                                        value={p.phase} 
                                                        onChange={(e) => updateArrayItem('timeline', p.id, 'phase', e.target.value)}
                                                        className="edit-field"
                                                        style={{ marginBottom: '12px' }}
                                                    />
                                                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: '12px', marginBottom: '12px' }}>
                                                        <input 
                                                            type="date" 
                                                            value={p.start} 
                                                            onChange={(e) => updateArrayItem('timeline', p.id, 'start', e.target.value)}
                                                            className="edit-field"
                                                        />
                                                        <input 
                                                            type="date" 
                                                            value={p.end} 
                                                            onChange={(e) => updateArrayItem('timeline', p.id, 'end', e.target.value)}
                                                            className="edit-field"
                                                        />
                                                        <input 
                                                            type="number" 
                                                            min="0" 
                                                            max="100" 
                                                            value={p.progress} 
                                                            onChange={(e) => updateArrayItem('timeline', p.id, 'progress', parseInt(e.target.value))}
                                                            className="edit-field"
                                                            placeholder="Progress %"
                                                        />
                                                    </div>
                                                    <button onClick={() => deleteItem('timeline', p.id)} className="edit-btn edit-btn-delete" style={{ width: '100%' }}>
                                                        <Trash size={12} color="white" /> Delete Phase
                                                    </button>
                                                </div>
                                            ) : (
                                                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px', flexWrap: 'wrap', gap: '12px' }}>
                                                    <div style={{ flex: 1, minWidth: '200px' }}>
                                                        <div style={{ fontSize: '15px', fontWeight: '700', color: colors.primary, marginBottom: '6px', textTransform: 'uppercase', letterSpacing: '0.3px' }}>{p.phase}</div>
                                                        <div style={{ fontSize: '12px', color: colors.textLight, fontWeight: '600' }}>
                                                            {new Date(p.start).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })} - {new Date(p.end).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}
                                                        </div>
                                                    </div>
                                                    <div style={{ fontSize: '20px', fontWeight: '700', color: p.progress === 100 ? colors.success : p.progress > 0 ? colors.info : colors.textLight }}>{p.progress}%</div>
                                                </div>
                                            )}
                                            <div style={{ width: '100%', height: '32px', background: colors.bg, borderRadius: '8px', overflow: 'hidden', border: `1px solid ${colors.border}` }}>
                                                <div style={{ width: `${p.progress}%`, height: '100%', background: p.progress === 100 ? colors.success : p.progress > 0 ? `linear-gradient(90deg, ${colors.primary} 0%, ${colors.info} 100%)` : colors.textLight, display: 'flex', alignItems: 'center', justifyContent: 'flex-end', paddingRight: '12px', transition: 'width 0.5s ease' }}>
                                                    {p.progress > 0 && <span style={{ color: colors.white, fontSize: '12px', fontWeight: '700', letterSpacing: '0.5px' }}>{p.progress}%</span>}
                                                </div>
                                            </div>
                                            {idx < data.timeline.length - 1 && <div style={{ width: '3px', height: '24px', background: colors.accent, margin: '12px 0 0 16px', borderRadius: '2px' }}></div>}
                                        </div>
                                    ))}
                                </div>
                                <div style={{ marginTop: '32px', padding: '20px', background: colors.bg, borderRadius: '8px', display: 'flex', gap: '24px', justifyContent: 'center', flexWrap: 'wrap', border: `1px solid ${colors.border}` }}>
                                    {[{ color: colors.success, label: 'Completed' }, { color: colors.info, label: 'In Progress' }, { color: colors.textLight, label: 'Not Started' }].map(l => (
                                        <div key={l.label} style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                                            <div style={{ width: '16px', height: '16px', background: l.color, borderRadius: '4px', border: `2px solid ${colors.white}`, boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}></div>
                                            <span style={{ fontSize: '12px', color: colors.text, fontWeight: '700', textTransform: 'uppercase', letterSpacing: '0.5px' }}>{l.label}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {tab === 'details' && (
                            <div style={{ background: colors.white, padding: '32px', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.08)', border: `1px solid ${colors.border}` }}>
                                <h2 style={{ fontSize: '24px', fontWeight: '700', color: colors.primary, marginBottom: '32px', textTransform: 'uppercase', letterSpacing: '-0.5px' }}>Project Details</h2>
                                <div className="mobile-stack" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginBottom: '40px' }}>
                                    {Object.entries(data.details).map(([k, v]) => (
                                        <div key={k} style={{ padding: '24px', background: colors.bg, borderRadius: '8px', border: `1px solid ${colors.border}` }}>
                                            <div style={{ fontSize: '11px', fontWeight: '700', color: colors.textLight, textTransform: 'uppercase', letterSpacing: '0.8px', marginBottom: '10px' }}>
                                                {k.replace(/([A-Z])/g, ' $1').trim()}
                                            </div>
                                            {edit ? (
                                                <input 
                                                    type="text" 
                                                    value={v} 
                                                    onChange={(e) => updateField(`details.${k}`, e.target.value)}
                                                    className="edit-field"
                                                />
                                            ) : (
                                                <div style={{ fontSize: '16px', fontWeight: '700', color: colors.primary, wordWrap: 'break-word' }}>{v}</div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                                <div style={{ borderTop: `2px solid ${colors.accent}`, paddingTop: '32px' }}>
                                    <h3 style={{ fontSize: '20px', fontWeight: '700', color: colors.primary, marginBottom: '20px', textTransform: 'uppercase', letterSpacing: '0.3px' }}>Detailed Milestones</h3>
                                    <div style={{ display: 'flex', flexDirection: 'column', gap: '14px' }}>
                                        {data.milestones.map(m => (
                                            <div key={m.id} style={{ padding: '20px', background: colors.bg, borderRadius: '8px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', gap: '16px', border: `1px solid ${colors.border}` }}>
                                                <div>
                                                    <div style={{ fontSize: '14px', fontWeight: '700', color: colors.primary, marginBottom: '6px' }}>{m.title}</div>
                                                    <div style={{ fontSize: '12px', color: colors.textLight, fontWeight: '600' }}>DUE: {new Date(m.date).toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' }).toUpperCase()}</div>
                                                </div>
                                                <span style={{ padding: '6px 16px', background: m.status === 'completed' ? colors.success : m.status === 'inProgress' ? colors.info : colors.white, color: m.status === 'completed' || m.status === 'inProgress' ? colors.white : colors.textLight, border: m.status === 'pending' ? `2px solid ${colors.border}` : 'none', borderRadius: '6px', fontSize: '11px', fontWeight: '700', letterSpacing: '0.5px' }}>
                                                    {m.status === 'completed' ? 'COMPLETED' : m.status === 'inProgress' ? 'IN PROGRESS' : 'PENDING'}
                                                </span>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}

                        {tab === 'courses' && (
                            <div style={{ background: colors.white, padding: '32px', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.08)', border: `1px solid ${colors.border}` }}>
                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '32px' }}>
                                    <div>
                                        <h2 style={{ fontSize: '24px', fontWeight: '700', color: colors.primary, marginBottom: '8px', textTransform: 'uppercase', letterSpacing: '-0.5px' }}>Course Visualizer</h2>
                                        <p style={{ fontSize: '13px', color: colors.textLight, fontWeight: '600' }}>5-Course Online Program Structure</p>
                                    </div>
                                    {edit && (
                                        <button onClick={() => addItem('courses', { title: 'New Course', mandatory: false, duration: '4 weeks', modules: 6, status: 'Planning', desc: 'Course description' })} className="edit-btn edit-btn-add">
                                            <Plus size={12} color="white" /> Add Course
                                        </button>
                                    )}
                                </div>
                                <div style={{ display: 'flex', flexDirection: 'column', gap: '20px', marginBottom: '40px' }}>
                                    {data.courses.map((c, idx) => (
                                        <div key={c.id} style={{ padding: '24px', background: c.mandatory ? `${colors.accent}15` : colors.bg, border: c.mandatory ? `2px solid ${colors.accent}` : `1px solid ${colors.border}`, borderRadius: '12px', position: 'relative' }}>
                                            {c.mandatory && !edit && (
                                                <div style={{ position: 'absolute', top: '-12px', left: '20px', background: colors.accent, color: colors.primary, padding: '4px 16px', borderRadius: '6px', fontSize: '10px', fontWeight: '700', letterSpacing: '0.8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>
                                                    MANDATORY · COURSE {c.id}
                                                </div>
                                            )}
                                            {edit ? (
                                                <div>
                                                    <input 
                                                        type="text" 
                                                        value={c.title} 
                                                        onChange={(e) => updateArrayItem('courses', c.id, 'title', e.target.value)}
                                                        className="edit-field"
                                                        style={{ marginBottom: '12px' }}
                                                        placeholder="Course Title"
                                                    />
                                                    <textarea 
                                                        value={c.desc} 
                                                        onChange={(e) => updateArrayItem('courses', c.id, 'desc', e.target.value)}
                                                        className="edit-field"
                                                        style={{ marginBottom: '12px', minHeight: '60px' }}
                                                        placeholder="Course Description"
                                                    />
                                                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr 1fr', gap: '12px', marginBottom: '12px' }}>
                                                        <input 
                                                            type="text" 
                                                            value={c.duration} 
                                                            onChange={(e) => updateArrayItem('courses', c.id, 'duration', e.target.value)}
                                                            className="edit-field"
                                                            placeholder="Duration"
                                                        />
                                                        <input 
                                                            type="number" 
                                                            value={c.modules} 
                                                            onChange={(e) => updateArrayItem('courses', c.id, 'modules', parseInt(e.target.value))}
                                                            className="edit-field"
                                                            placeholder="Modules"
                                                        />
                                                        <select 
                                                            value={c.status} 
                                                            onChange={(e) => updateArrayItem('courses', c.id, 'status', e.target.value)}
                                                            className="edit-field"
                                                        >
                                                            <option value="Planning">Planning</option>
                                                            <option value="Design">Design</option>
                                                            <option value="Development">Development</option>
                                                            <option value="Complete">Complete</option>
                                                        </select>
                                                        <label style={{ display: 'flex', alignItems: 'center', gap: '8px', padding: '8px 12px', background: colors.white, borderRadius: '6px', border: `2px solid ${colors.accent}` }}>
                                                            <input 
                                                                type="checkbox" 
                                                                checked={c.mandatory} 
                                                                onChange={(e) => updateArrayItem('courses', c.id, 'mandatory', e.target.checked)}
                                                            />
                                                            <span style={{ fontSize: '12px', fontWeight: '700' }}>Mandatory</span>
                                                        </label>
                                                    </div>
                                                    <button onClick={() => deleteItem('courses', c.id)} className="edit-btn edit-btn-delete" style={{ width: '100%' }}>
                                                        <Trash size={12} color="white" /> Delete Course
                                                    </button>
                                                </div>
                                            ) : (
                                                <div className="mobile-stack" style={{ display: 'grid', gridTemplateColumns: '2fr 1fr 1fr 1fr', gap: '16px', alignItems: 'start' }}>
                                                    <div>
                                                        <div style={{ fontSize: '11px', fontWeight: '700', color: colors.textLight, marginBottom: '6px', letterSpacing: '0.5px' }}>COURSE {c.id}</div>
                                                        <div style={{ fontSize: '16px', fontWeight: '700', color: colors.primary, marginBottom: '8px' }}>{c.title}</div>
                                                        <div style={{ fontSize: '12px', color: colors.textLight, lineHeight: '1.6', fontWeight: '500' }}>{c.desc}</div>
                                                    </div>
                                                    <div>
                                                        <div style={{ fontSize: '10px', fontWeight: '700', color: colors.textLight, textTransform: 'uppercase', marginBottom: '6px', letterSpacing: '0.5px' }}>Duration</div>
                                                        <div style={{ fontSize: '14px', fontWeight: '700', color: colors.primary }}>{c.duration}</div>
                                                    </div>
                                                    <div>
                                                        <div style={{ fontSize: '10px', fontWeight: '700', color: colors.textLight, textTransform: 'uppercase', marginBottom: '6px', letterSpacing: '0.5px' }}>Modules</div>
                                                        <div style={{ fontSize: '14px', fontWeight: '700', color: colors.primary }}>{c.modules}</div>
                                                    </div>
                                                    <div>
                                                        <div style={{ fontSize: '10px', fontWeight: '700', color: colors.textLight, textTransform: 'uppercase', marginBottom: '6px', letterSpacing: '0.5px' }}>Status</div>
                                                        <span style={{ padding: '5px 12px', background: c.status === 'Development' ? colors.info : c.status === 'Design' ? colors.warning : colors.textLight, color: colors.white, borderRadius: '6px', fontSize: '10px', fontWeight: '700', display: 'inline-block', letterSpacing: '0.5px' }}>
                                                            {c.status.toUpperCase()}
                                                        </span>
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                                <div style={{ padding: '32px', background: colors.bg, borderRadius: '12px', border: `2px solid ${colors.accent}` }}>
                                    <h3 style={{ fontSize: '18px', fontWeight: '700', color: colors.primary, marginBottom: '24px', textAlign: 'center', textTransform: 'uppercase', letterSpacing: '0.5px' }}>Student Course Flow</h3>
                                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '16px', flexWrap: 'wrap' }}>
                                        <div style={{ padding: '16px 20px', background: colors.accent, color: colors.primary, borderRadius: '8px', fontWeight: '700', fontSize: '13px', textAlign: 'center', border: `2px solid ${colors.primary}`, letterSpacing: '0.3px' }}>COURSE 1<br /><span style={{ fontSize: '10px' }}>(MANDATORY)</span></div>
                                        <div style={{ fontSize: '24px', color: colors.accent, fontWeight: '700' }}>→</div>
                                        <div style={{ padding: '16px 20px', background: colors.white, borderRadius: '8px', border: `2px dashed ${colors.secondary}`, textAlign: 'center' }}>
                                            <div style={{ fontSize: '13px', fontWeight: '700', color: colors.primary, marginBottom: '6px', letterSpacing: '0.3px' }}>STUDENT CHOICE</div>
                                            <div style={{ fontSize: '10px', color: colors.textLight, fontWeight: '600' }}>Any Order</div>
                                        </div>
                                        <div style={{ fontSize: '24px', color: colors.accent, fontWeight: '700' }}>→</div>
                                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '12px' }}>
                                            {['C2', 'C3', 'C4', 'C5'].map(c => (
                                                <div key={c} style={{ padding: '12px 18px', background: colors.white, border: `2px solid ${colors.primary}`, borderRadius: '8px', fontWeight: '700', fontSize: '12px', color: colors.primary, textAlign: 'center', letterSpacing: '0.5px' }}>
                                                    {c}
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {tab === 'stakeholders' && (
                            <div style={{ background: colors.white, padding: '32px', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.08)', border: `1px solid ${colors.border}` }}>
                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '32px' }}>
                                    <EditableLabel 
                                        labelKey="stakeholdersHeader" 
                                        style={{ fontSize: '24px', fontWeight: '700', color: colors.primary, textTransform: 'uppercase', letterSpacing: '-0.5px' }}
                                        onClick={() => setShowLabelModal(true)}
                                    />
                                    {edit && (
                                        <button onClick={() => addItem('stakeholders', { name: 'New Stakeholder', role: 'Role', contact: 'email@ra.ac.ae' })} className="edit-btn edit-btn-add">
                                            <Plus size={12} color="white" /> {labels.addStakeholder}
                                        </button>
                                    )}
                                </div>
                                <div style={{ display: 'grid', gap: '16px', marginBottom: '40px' }}>
                                    {data.stakeholders.map(s => (
                                        <div key={s.id} style={{ padding: '20px', background: colors.bg, borderRadius: '8px', border: `1px solid ${colors.border}` }}>
                                            {edit ? (
                                                <div>
                                                    <input 
                                                        type="text" 
                                                        value={s.name} 
                                                        onChange={(e) => updateArrayItem('stakeholders', s.id, 'name', e.target.value)}
                                                        className="edit-field"
                                                        style={{ marginBottom: '12px' }}
                                                        placeholder="Name"
                                                    />
                                                    <input 
                                                        type="text" 
                                                        value={s.role} 
                                                        onChange={(e) => updateArrayItem('stakeholders', s.id, 'role', e.target.value)}
                                                        className="edit-field"
                                                        style={{ marginBottom: '12px' }}
                                                        placeholder="Role"
                                                    />
                                                    <div style={{ display: 'flex', gap: '8px' }}>
                                                        <input 
                                                            type="email" 
                                                            value={s.contact} 
                                                            onChange={(e) => updateArrayItem('stakeholders', s.id, 'contact', e.target.value)}
                                                            className="edit-field"
                                                            placeholder="Contact Email"
                                                        />
                                                        <button onClick={() => deleteItem('stakeholders', s.id)} className="edit-btn edit-btn-delete">
                                                            <Trash size={12} color="white" />
                                                        </button>
                                                    </div>
                                                </div>
                                            ) : (
                                                <div className="mobile-stack" style={{ display: 'grid', gridTemplateColumns: '2fr 2fr 3fr', gap: '16px', alignItems: 'center' }}>
                                                    <div>
                                                        <div style={{ fontSize: '15px', fontWeight: '700', color: colors.primary, marginBottom: '4px', wordWrap: 'break-word' }}>{s.name}</div>
                                                    </div>
                                                    <div>
                                                        <div style={{ fontSize: '10px', fontWeight: '700', color: colors.textLight, textTransform: 'uppercase', marginBottom: '4px', letterSpacing: '0.5px' }}>Role</div>
                                                        <div style={{ fontSize: '13px', fontWeight: '700', color: colors.text }}>{s.role}</div>
                                                    </div>
                                                    <div>
                                                        <div style={{ fontSize: '10px', fontWeight: '700', color: colors.textLight, textTransform: 'uppercase', marginBottom: '4px', letterSpacing: '0.5px' }}>Contact</div>
                                                        <a href={`mailto:${s.contact}`} style={{ fontSize: '12px', color: colors.secondary, textDecoration: 'none', fontWeight: '600', wordBreak: 'break-all' }}>{s.contact}</a>
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                                <div style={{ borderTop: `2px solid ${colors.accent}`, paddingTop: '32px' }}>
                                    <EditableLabel 
                                        labelKey="stakeholdersTeamHeader" 
                                        style={{ fontSize: '20px', fontWeight: '700', color: colors.primary, marginBottom: '20px', textTransform: 'uppercase', letterSpacing: '0.3px', display: 'block' }}
                                        onClick={() => setShowLabelModal(true)}
                                    />
                                    <div style={{ padding: '28px', background: colors.bg, borderRadius: '12px', border: `1px solid ${colors.border}` }}>
                                        <div className="mobile-stack" style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '24px' }}>
                                            {[{ num: data.details.team.split(' ')[0], label: 'Team Members', color: colors.primary }, { num: data.stakeholders.length.toString(), label: 'Key Stakeholders', color: colors.accent }, { num: '5', label: 'Departments', color: colors.primary }].map(t => (
                                                <div key={t.label} style={{ textAlign: 'center' }}>
                                                    <div style={{ fontSize: '40px', fontWeight: '700', color: t.color, marginBottom: '8px', letterSpacing: '-1px' }}>{t.num}</div>
                                                    <div style={{ fontSize: '11px', color: colors.textLight, fontWeight: '700', textTransform: 'uppercase', letterSpacing: '0.5px' }}>{t.label}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
